"use strict";(self.webpackChunkcodespaces_web_client=self.webpackChunkcodespaces_web_client||[]).push([[436],{98761:(e,n,t)=>{t.d(n,{x:()=>H});var r,a=t(9895),o=t(39312),i=t(6806),s=t(96933),u=t(28185),c=t(55028),d=t(8823),l=t(14270),f=t(31819),h=t(96247),v=t(99322),p=t(45464),y="sendAttempt",g="&"+h.Zv+"=true",S=((r={})[1]=h.WA,r[100]=h.WA,r[200]="sent",r[8004]=h.$W,r[8003]=h.$W,r),b={},m={};function w(e,n,t){b[e]=n,!1!==t&&(m[n]=e)}function T(e){try{return e.responseText}catch(e){}return""}function _(e,n){var t=!1;if(e&&n){var r=(0,s.FY)(e);if(r&&r.length>0)for(var a=n.toLowerCase(),o=0;o<r.length;o++){var i=r[o];if(i&&(0,s.nr)(n,i)&&i.toLowerCase()===a){t=!0;break}}}return t}function k(e,n,t,r){n&&t&&t.length>0&&(r&&b[n]?(e.hdrs[b[n]]=t,e.useHdrs=!0):e.url+="&"+n+"="+t)}w(h.j9,h.j9,!1),w(h.Ft,h.Ft),w(h.kd,"Client-Id"),w(h.iV,h.iV),w(h.cE,h.cE),w(h.TB,h.TB),w(h.dG,h.dG);var H=function(){function e(n,t,r,b,w){this._responseHandlers=[];var H,P,R,C,E,O,B,K="?cors=true&"+h.V2.toLowerCase()+"="+h.ME,x=new i.Z,L=!1,M=new o.Z,z=!1,F=0,U=!0,W=[],j={},q=[],V=null,A=!1,X=!1,$=!1;(0,a.Z)(e,this,(function(e){var a=!0;function o(e,n){for(var t=0,r=null,a=0;null==r&&a<e.length;)1===(t=e[a])?(0,u.cp)()?r=i:(0,u.Z3)()&&(r=G):2===t&&(0,u.JO)(n)?r=D:z&&3===t&&(0,u.MF)()&&(r=Y),a++;return r?{_transport:t,_isSync:n,sendPOST:r}:null}function i(e,n,t){var r=new XDomainRequest;r.open(h.aG,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=T(r);I(n,200,{},e),se(e)},r.onerror=function(){I(n,400,{})},r.ontimeout=function(){I(n,500,{})},r.onprogress=function(){},t?r.send(e.data):w.set((function(){r.send(e.data)}),0)}function D(e,n,t){var r,o=e.urlString,i=!1,u=!1,c=((r={body:e.data,method:h.aG})[h.Fb]=!0,r);t&&(c.keepalive=!0,2===e._sendReason&&(i=!0,o+=g)),a&&(c.credentials="include"),e.headers&&(0,s.FY)(e.headers).length>0&&(c.headers=e.headers),fetch(o,c).then((function(e){var t={},r="",a=e.headers;a&&a.forEach((function(e,n){t[n]=e})),e.body&&e.text().then((function(e){r=e})),u||(u=!0,I(n,e.status,t,r),se(r))})).catch((function(e){u||(u=!0,I(n,0,{}))})),i&&!u&&(u=!0,I(n,200,{})),!u&&e.timeout>0&&w.set((function(){u||(u=!0,I(n,500,{}))}),e.timeout)}function G(e,n,t){var r=e.urlString;function o(e,n,t){if(!e[t]&&n&&n.getResponseHeader){var r=n.getResponseHeader(t);r&&(e[t]=(0,s.nd)(r))}return e}function i(e){var n={};return e.getAllResponseHeaders?n=function(e){var n={};if((0,s.HD)(e)){var t=(0,s.nd)(e).split(/[\r\n]+/);(0,s.tO)(t,(function(e){if(e){var t=e.indexOf(": ");if(-1!==t){var r=(0,s.nd)(e.substring(0,t)).toLowerCase(),a=(0,s.nd)(e.substring(t+1));n[r]=a}else n[(0,s.nd)(e)]=1}}))}return n}(e.getAllResponseHeaders()):(n=o(n,e,h.EY),n=o(n,e,h.iP),n=o(n,e,h.oW)),n}function u(e,t){I(n,e.status,i(e),t)}t&&e.disableXhrSync&&(t=!1);var c=(0,d.ot)(h.aG,r,a,!0,t,e.timeout);(0,s.rW)(e.headers,(function(e,n){c.setRequestHeader(e,n)})),c.onload=function(){var e=T(c);u(c,e),se(e)},c.onerror=function(){u(c)},c.ontimeout=function(){u(c)},c.send(e.data)}function I(e,n,t,r){try{e(n,t,r)}catch(e){(0,c.kP)(P,2,518,(0,u.eU)(e))}}function Y(e,n,t){var r=200,a=e._thePayload,o=e.urlString+g;try{var i=(0,u.jW)();if(!i.sendBeacon(o,e.data))if(a){var d=[];(0,s.tO)(a.batches,(function(e){if(d&&e&&e.count()>0){for(var n=e.events(),t=0;t<n.length;t++)if(!i.sendBeacon(o,V.getEventBlob(n[t]))){d.push(e.split(t));break}}else d.push(e.split(0))})),ue(d,8003,a.sendType,!0)}else r=0}catch(e){(0,c.jV)(P,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eU)(e)),r=0}finally{I(n,r,{},"")}}function Z(e){return 2===e||3===e}function N(e){return X&&Z(e)&&(e=2),e}function Q(){return!L&&F<t}function J(){var e=q;return q=[],e}function ee(e,n,t){var r=!1;return e&&e.length>0&&!L&&R[n]&&V&&(r=0!==n||Q()&&(t>0||M.allowRequestSending())),r}function ne(e){var n={};return e&&(0,s.tO)(e,(function(e,t){n[t]={iKey:e.iKey(),evts:e.events()}})),n}function te(e,t,r,a,o){if(e&&0!==e.length)if(L)ue(e,1,a);else{a=N(a);try{var i=e,s=0!==a;(0,l.Lm)(C,(function(){return"HttpManager:_sendBatches"}),(function(i){i&&(e=e.slice(0));for(var c=[],l=null,f=(0,d.hK)(),h=R[a]||(s?R[1]:R[0]),v=(X||Z(a)||h&&3===h._transport)&&!U&&z&&(0,u.MF)();ee(e,a,t);){var p=e.shift();p&&p.count()>0&&(x.isTenantKilled(p.iKey())?c.push(p):(l=l||V.createPayload(t,r,s,v,o,a),V.appendPayload(l,p,n)?null!==l.overflow&&(e=[l.overflow].concat(e),l.overflow=null,oe(l,f,(0,d.hK)(),o),f=(0,d.hK)(),l=null):(oe(l,f,(0,d.hK)(),o),f=(0,d.hK)(),e=[p].concat(e),l=null)))}l&&oe(l,f,(0,d.hK)(),o),e.length>0&&(q=e.concat(q)),ue(c,8004,a)}),(function(){return{batches:ne(i),retryCount:t,isTeardown:r,isSynchronous:s,sendReason:o,useSendBeacon:Z(a),sendType:a}}),!s)}catch(e){(0,c.kP)(P,2,48,"Unexpected Exception sending batch: "+(0,u.eU)(e))}}}function re(e,n){var t={url:K,hdrs:{},useHdrs:!1};n?(t.hdrs=(0,d.l7)(t.hdrs,j),t.useHdrs=(0,s.FY)(t.hdrs).length>0):(0,s.rW)(j,(function(e,n){m[e]?k(t,m[e],n,!1):(t.hdrs[e]=n,t.useHdrs=!0)})),k(t,h.kd,"NO_AUTH",n),k(t,h.Ft,d.vs,n);var r="";(0,s.tO)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),k(t,h.iV,r,n),k(t,h.TB,(0,s.m6)().toString(),n);var a=function(e){for(var n=0;n<e.batches.length;n++){var t=e.batches[n].Msfpc();if(t)return encodeURIComponent(t)}return""}(e);if((0,d.Sn)(a)&&(t.url+="&ext.intweb.msfpc="+a),M.shouldAddClockSkewHeaders()&&k(t,h.cE,M.getClockSkewHeaderValue(),n),C.getWParam){var o=C.getWParam();o>=0&&(t.url+="&w="+o)}for(var i=0;i<W.length;i++)t.url+="&"+W[i].name+"="+W[i].value;return t}function ae(e,n,t){e[n]=e[n]||{},e[n][H.identifier]=t}function oe(n,t,a,o){if(n&&n.payloadBlob&&n.payloadBlob.length>0){var i=!!e.sendHook,p=R[n.sendType];!Z(n.sendType)&&n.isBeacon&&2===n.sendReason&&(p=R[2]||R[3]||p);var g=$;(n.isBeacon||3===p._transport)&&(g=!1);var S=re(n,g);g=g||S.useHdrs;var b=(0,d.hK)();(0,l.Lm)(C,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var m=0;m<n.batches.length;m++)for(var w=n.batches[m].events(),T=0;T<w.length;T++){var k=w[T];if(A){var R=k.timings=k.timings||{};ae(R,"sendEventStart",b),ae(R,"serializationStart",t),ae(R,"serializationCompleted",a)}k[y]>0?k[y]++:k[y]=1}ue(n.batches,1e3+(o||0),n.sendType,!0);var E={data:n.payloadBlob,urlString:S.url,headers:S.hdrs,_thePayload:n,_sendReason:o,timeout:O};(0,s.o8)(B)||(E.disableXhrSync=!!B),g&&(_(E.headers,h.Hf)||(E.headers[h.Hf]=h.dI),_(E.headers,h.V2)||(E.headers[h.V2]=h.ME));var K=null;p&&(K=function(t){M.firstRequestSent();var a=function(t,a){!function(n,t,a,o){var i=9e3,u=null,c=!1,l=!1;try{var p=!0;if(typeof n!==f.jA){if(t){M.setClockSkew(t[h.EY]);var y=t[h.iP]||t["kill-duration-seconds"];(0,s.tO)(x.setKillSwitchTenants(t[h.fs],y),(function(e){(0,s.tO)(a.batches,(function(n){if(n.iKey()===e){u=u||[];var t=n.split(0);a.numEvents-=t.count(),u.push(t)}}))}))}if(200==n||204==n)return void(i=200);(!(0,v.D)(n)||a.numEvents<=0)&&(p=!1),i=9e3+n%1e3}if(p){i=100;var g=a.retryCnt;0===a.sendType&&(g<r?(c=!0,ie((function(){0===a.sendType&&F--,te(a.batches,g+1,a.isTeardown,X?2:a.sendType,5)}),X,(0,v.e)(g))):(l=!0,X&&(i=8001)))}}finally{c||(M.setClockSkew(),function(n,t,r,a){try{a&&H._backOffTransmission(),200===t&&(a||n.isSync||H._clearBackOff(),function(e){if(A){var n=(0,d.hK)();(0,s.tO)(e,(function(e){e&&e.count()>0&&function(e,n){A&&(0,s.tO)(e,(function(e){ae(e.timings=e.timings||{},"sendEventCompleted",n)}))}(e.events(),n)}))}}(n.batches)),ue(n.batches,t,n.sendType,!0)}finally{0===n.sendType&&(F--,5!==r&&e.sendQueuedRequests(n.sendType,r))}}(a,i,o,l)),ue(u,8004,a.sendType)}}(t,a,n,o)},i=n.isTeardown||n.isSync;try{p.sendPOST(t,a,i),e.sendListener&&e.sendListener(E,t,i,n.isBeacon)}catch(e){(0,c.jV)(P,"Unexpected exception sending payload. Ex:"+(0,u.eU)(e)),I(a,0,{})}}),(0,l.Lm)(C,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(K)if(0===n.sendType&&F++,i&&!n.isBeacon&&3!==p._transport){var t={data:E.data,urlString:E.urlString,headers:(0,d.l7)({},E.headers),timeout:E.timeout,disableXhrSync:E.disableXhrSync},r=!1;(0,l.Lm)(C,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(t,(function(e){r=!0,U||e._thePayload||(e._thePayload=e._thePayload||E._thePayload,e._sendReason=e._sendReason||E._sendReason),K(e)}),n.isSync||n.isTeardown)}catch(e){r||K(E)}}))}else K(E)}))}),(function(){return{thePayload:n,serializationStart:t,serializationCompleted:a,sendReason:o}}),n.isSync)}n.sizeExceed&&n.sizeExceed.length>0&&ue(n.sizeExceed,8003,n.sendType),n.failedEvts&&n.failedEvts.length>0&&ue(n.failedEvts,8002,n.sendType)}function ie(e,n,t){n?e():w.set(e,t)}function se(n){var t=e._responseHandlers;try{for(var r=0;r<t.length;r++)try{t[r](n)}catch(e){(0,c.kP)(P,1,519,"Response handler failed: "+e)}if(n){var a=JSON.parse(n);(0,d.Sn)(a.webResult)&&(0,d.Sn)(a.webResult[h.fz])&&E.set("MSFPC",a.webResult[h.fz],31536e3)}}catch(e){}}function ue(e,n,t,r){if(e&&e.length>0&&b){var a=b[function(e){var n=S[e];(0,d.Sn)(n)||(n=h.E_,e>=9e3&&e<=9999?n=h.xv:e>=8e3&&e<=8999?n=h.$W:e>=1e3&&e<=1999&&(n=h.jv));return n}(n)];if(a){var o=0!==t;(0,l.Lm)(C,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){ie((function(){try{a.call(b,e,n,o,t)}catch(e){(0,c.kP)(P,1,74,"send request notification failed: "+e)}}),r||o,0)}),(function(){return{batches:ne(e),reason:n,isSync:o,sendSync:r,sendType:t}}),!o)}}}e.initialize=function(e,n,t,r,i){var d;i||(i={}),K=e+K,$=!!(0,s.o8)(i.avoidOptions)||!i.avoidOptions,C=n,E=n.getCookieMgr(),A=!C.config.disableEventTimings;var l=!!C.config.enableCompoundKey;P=(H=t).diagLog();var f=i.valueSanitizer,h=i.stringifyObjects;(0,s.o8)(i.enableCompoundKey)||(l=!!i.enableCompoundKey),O=i.xhrTimeout,B=i.disableXhrSync,z=!(0,u.b$)(),V=new p.e(C,f,h,l);var v=r,y=i.alwaysUseXhrOverride?r:null,g=i.alwaysUseXhrOverride?r:null;if(!r){U=!1;var S=(0,u.k$)();S&&S.protocol&&"file:"===S.protocol.toLowerCase()&&(a=!1);var b=[];b=(0,u.b$)()?[2,1]:[1,2,3];var m=i.transports;m&&((0,s.hj)(m)?b=[m].concat(b):(0,s.kJ)(m)&&(b=m.concat(b))),r=o(b,!1),v=o(b,!0),r||(0,c.jV)(P,"No available transport to send events")}(d={})[0]=r,d[1]=v||o([1,2,3],!0),d[2]=y||o([3,2],!0)||v||o([1],!0),d[3]=g||o([2,3],!0)||v||o([1],!0),R=d},e._getDbgPlgTargets=function(){return[R[0],x,V,R]},e.addQueryStringParameter=function(e,n){for(var t=0;t<W.length;t++)if(W[t].name===e)return void(W[t].value=n);W.push({name:e,value:n})},e.addHeader=function(e,n){j[e]=n},e.canSendRequest=function(){return Q()&&M.allowRequestSending()},e.sendQueuedRequests=function(e,n){(0,s.o8)(e)&&(e=0),X&&(e=N(e),n=2),ee(q,e,0)&&te(J(),0,!1,e,n||0)},e.isCompletelyIdle=function(){return!L&&0===F&&0===q.length},e.setUnloading=function(e){X=e},e.addBatch=function(e){if(e&&e.count()>0){if(x.isTenantKilled(e.iKey()))return!1;q.push(e)}return!0},e.teardown=function(){q.length>0&&te(J(),0,!0,2,2)},e.pause=function(){L=!0},e.resume=function(){L=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,n,t){e&&e.count()>0&&((0,s.le)(n)&&(n=1),X&&(n=N(n),t=2),te([e],0,!1,n,t||0))}}))}return e.__ieDyn=1,e}()}}]);