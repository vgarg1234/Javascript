"use strict";(self.webpackChunkcodespaces_web_client=self.webpackChunkcodespaces_web_client||[]).push([[823],{42135:(e,n,t)=>{t.d(n,{Z:()=>O});var i=t(49577),a=t(9895),o=t(14270),r=t(96739),u=t(68886),c=t(8823),s=t(96933),l=t(28185),f=t(23558),d=t(55028),v=t(63143),h=t(70872),m=t(51281),p=t(98761),y=t(96247),g=t(99322),b=t(92633),x="eventsDiscarded",_="overrideInstrumentationKey",C="maxEventRetryAttempts",M="maxUnloadEventRetryAttempts";const O=function(e){function n(){var t,i=e.call(this)||this;i.identifier="PostChannel",i.priority=1011,i.version="3.2.4";var v,O,T,w,k,E,P,A=!1,K=[],R=null,L=!1,z=0,S=500,U=0,I=1e4,N={},j=h.ow,q=null,D=null,H=0,F=0,Q={},B=-1,J=!0,G=!1,Y=6,W=2;return(0,a.Z)(n,i,(function(e,n){function i(e){"beforeunload"!==(e||(0,l.Jj)().event).type&&(G=!0,O.setUnloading(G)),ie(2,2)}function a(e){G=!1,O.setUnloading(G)}function X(e,n){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext[y.zC]&&delete e.ext[y.zC],e.ext&&e.ext[y.IY]&&e.ext[y.IY].id&&delete e.ext[y.IY].id,J&&(c.if,e.ext=(0,s.Ax)(e.ext),e.baseData&&(e.baseData=(0,s.Ax)(e.baseData)),e.data&&(e.data=(0,s.Ax)(e.data))),e.sync)if(H||L)e.latency=3,e.sync=!1;else if(O)return J&&(e=(0,s.Ax)(e)),void O.sendSynchronousBatch(m.l.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var t=e.latency,i=U,a=I;4===t&&(i=z,a=S);var o=!1;if(i<a)o=!re(e,n);else{var r=1,u=20;4===t&&(r=4,u=1),o=!0,function(e,n,t,i){for(;t<=n;){var a=ae(e,n,!0);if(a&&a.count()>0){var o=a.split(0,i),r=o.count();if(r>0)return 4===t?z-=r:U-=r,me(x,[o],f.h.QueueFull),!0}t++}return ue(),!1}(e.iKey,e.latency,r,u)&&(o=!re(e,n))}o&&he(x,[e],f.h.QueueFull)}function Z(e,n,t){var i=ce(e,n,t);return O.sendQueuedRequests(n,t),i}function V(){return U>0}function $(){if(B>=0&&ce(B,0,k)&&O.sendQueuedRequests(0,k),z>0&&!D&&!L){var e=N[j][2];e>=0&&(D=ne((function(){D=null,Z(4,0,1),$()}),e))}var n=N[j][1];!q&&!R&&n>=0&&!L&&(V()?q=ne((function(){q=null,Z(0===F?3:1,0,1),F++,F%=2,$()}),n):F=0)}function ee(){t=null,A=!1,K=[],R=null,L=!1,z=0,S=500,U=0,I=1e4,N={},j=h.ow,q=null,D=null,H=0,F=0,v=null,Q={},T=void 0,w=0,B=-1,k=null,J=!0,G=!1,Y=6,W=2,E=null,P=(0,b.zG)(),O=new p.x(500,2,1,{requeue:de,send:pe,sent:ye,drop:ge,rspFail:be,oth:xe},P),fe(),Q[4]={batches:[],iKeyMap:{}},Q[3]={batches:[],iKeyMap:{}},Q[2]={batches:[],iKeyMap:{}},Q[1]={batches:[],iKeyMap:{}},_e()}function ne(e,n){0===n&&H&&(n=1);var t=1e3;return H&&(t=(0,g.e)(H-1)),P.set(e,n*t)}function te(){return null!==q&&(P.clear(q),q=null,F=0,!0)}function ie(e,n){te(),R&&(P.clear(R),R=null),L||Z(1,e,n)}function ae(e,n,t){var i=Q[n];i||(i=Q[n=1]);var a=i.iKeyMap[e];return!a&&t&&(a=m.l.create(e),i.batches.push(a),i.iKeyMap[e]=a),a}function oe(n,t){O.canSendRequest()&&!H&&(T>0&&U>T&&(t=!0),t&&null==R&&e.flush(n,null,20))}function re(e,n){J&&(e=(0,s.Ax)(e));var t=e.latency,i=ae(e.iKey,t,!0);return!!i.addEvent(e)&&(4!==t?(U++,n&&0===e.sendAttempt&&oe(!e.sync,w>0&&i.count()>=w)):z++,!0)}function ue(){for(var e=0,n=0,t=function(t){var i=Q[t];i&&i.batches&&(0,s.tO)(i.batches,(function(i){4===t?e+=i.count():n+=i.count()}))},i=1;i<=4;i++)t(i);U=n,z=e}function ce(n,t,i){var a=!1,r=0===t;return!r||O.canSendRequest()?(0,o.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],t=4;t>=n;){var i=Q[t];i&&i.batches&&i.batches.length>0&&((0,s.tO)(i.batches,(function(n){O.addBatch(n)?a=a||n&&n.count()>0:e=e.concat(n.events()),4===t?z-=n.count():U-=n.count()})),i.batches=[],i.iKeyMap={}),t--}e.length>0&&he(x,e,f.h.KillSwitch),a&&B>=n&&(B=-1,k=0)}),(function(){return{latency:n,sendType:t,sendReason:i}}),!r):(B=B>=0?Math.min(B,n):n,k=Math.max(k,i)),a}function se(e,n){Z(1,0,n),ue(),le((function(){e&&e(),K.length>0?R=ne((function(){R=null,se(K.shift(),n)}),0):(R=null,$())}))}function le(e){O.isCompletelyIdle()?e():R=ne((function(){R=null,le(e)}),.25)}function fe(){(N={})[h.ow]=[2,1,0],N[h.je]=[6,3,0],N[h.e2]=[18,9,0]}function de(n,t){var i=[],a=Y;G&&(a=W),(0,s.tO)(n,(function(n){n&&n.count()>0&&(0,s.tO)(n.events(),(function(n){n&&(n.sync&&(n.latency=4,n.sync=!1),n.sendAttempt<a?((0,c.if)(n,e.identifier),X(n,!1)):i.push(n))}))})),i.length>0&&he(x,i,f.h.NonRetryableStatus),G&&ie(2,2)}function ve(n,t){var i=e._notificationManager||{},a=i[n];if(a)try{a.apply(i,t)}catch(t){(0,d.kP)(e.diagLog(),1,74,n+" notification failed: "+t)}}function he(e,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];n&&n.length>0&&ve(e,[n].concat(t))}function me(e,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];n&&n.length>0&&(0,s.tO)(n,(function(n){n&&n.count()>0&&ve(e,[n.events()].concat(t))}))}function pe(e,n,t){e&&e.length>0&&ve("eventsSendRequest",[n>=1e3&&n<=1999?n-1e3:0,!0!==t])}function ye(e,n){me("eventsSent",e,n),$()}function ge(e,n){me(x,e,n>=8e3&&n<=8999?n-8e3:f.h.Unknown)}function be(e){me(x,e,f.h.NonRetryableStatus),$()}function xe(e,n){me(x,e,f.h.Unknown),$()}function _e(){w=t&&t.disableAutoBatchFlushLimit?0:Math.max(1500,I/6)}ee(),e._getDbgPlgTargets=function(){return[O]},e.initialize=function(l,f,d){(0,o.Lm)(f,(function(){return"PostChannel:initialize"}),(function(){var o=f;n.initialize(l,f,d);try{f.addUnloadCb;E=(0,r.jU)((0,u.J)(e.identifier),f.evtNamespace&&f.evtNamespace());var h=e._getTelCtx();l.extensionConfig[e.identifier]=l.extensionConfig[e.identifier]||{},t=h.getExtCfg(e.identifier),P=(0,b.zG)(t.setTimeoutOverride,t.clearTimeoutOverride),J=!t.disableOptimizeObj&&(0,c.mJ)(),function(e){var n=e.getWParam;e.getWParam=function(){var e=0;return t.ignoreMc1Ms0CookieProcessing&&(e|=2),e|n()}}(o),t.eventsLimitInMem>0&&(I=t.eventsLimitInMem),t.immediateEventLimit>0&&(S=t.immediateEventLimit),t.autoFlushEventsLimit>0&&(T=t.autoFlushEventsLimit),(0,s.hj)(t[C])&&(Y=t[C]),(0,s.hj)(t[M])&&(W=t[M]),_e(),t.httpXHROverride&&t.httpXHROverride.sendPOST&&(v=t.httpXHROverride),(0,c.Sn)(l.anonCookieName)&&O.addQueryStringParameter("anoncknm",l.anonCookieName),O.sendHook=t.payloadPreprocessor,O.sendListener=t.payloadListener;var m=t.overrideEndpointUrl?t.overrideEndpointUrl:l.endpointUrl;e._notificationManager=l.extensionConfig.NotificationManager,O.initialize(m,e.core,e,v,t);var p=l.disablePageUnloadEvents||[];(0,r.c9)(i,p,E),(0,r.TJ)(i,p,E),(0,r.nD)(a,l.disablePageShowEvents,E)}catch(n){throw e.setInitialized(!1),n}}),(function(){return{coreConfig:l,core:f,extensions:d}}))},e.processTelemetry=function(n,i){(0,c.if)(n,e.identifier);var a=(i=e._getTelCtx(i)).getExtCfg(e.identifier),o=!!t.disableTelemetry;a&&(o=o||!!a.disableTelemetry);var r=n;o||A||(t[_]&&(r.iKey=t[_]),a&&a[_]&&(r.iKey=a[_]),X(r,!0),G?ie(2,2):$()),e.processNext(r,i)},e._doTeardown=function(e,n){ie(2,2),A=!0,O.teardown(),(0,r.JA)(null,E),(0,r.C9)(null,E),(0,r.Yl)(null,E),ee()},e.setEventQueueLimits=function(e,n){I=e>0?e:1e4,T=n>0?n:0,_e();var t=U>e;if(!t&&w>0)for(var i=1;!t&&i<=3;i++){var a=Q[i];a&&a.batches&&(0,s.tO)(a.batches,(function(e){e&&e.count()>=w&&(t=!0)}))}oe(!0,t)},e.pause=function(){te(),L=!0,O.pause()},e.resume=function(){L=!1,O.resume(),$()},e.addResponseHandler=function(e){O._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){te(),fe(),j=h.ow,$(),(0,s.rW)(e,(function(e,n){var t=n.length;if(t>=2){var i=t>2?n[2]:0;if(n.splice(0,t-2),n[1]<0&&(n[0]=-1),n[1]>0&&n[0]>0){var a=n[0]/n[1];n[0]=Math.ceil(a)*n[1]}i>=0&&n[1]>=0&&i>n[1]&&(i=n[1]),n.push(i),N[e]=n}}))},e.flush=function(e,n,t){if(void 0===e&&(e=!0),!L)if(t=t||1,e)null==R?(te(),ce(1,0,t),R=ne((function(){R=null,se(n,t)}),0)):K.push(n);else{var i=te();Z(1,1,t),null!=n&&n(),i&&$()}},e.setMsaAuthTicket=function(e){O.addHeader(y.j9,e)},e.hasEvents=V,e._setTransmitProfile=function(e){j!==e&&void 0!==N[e]&&(te(),j=e,$())},e._backOffTransmission=function(){H<4&&(H++,te(),$())},e._clearBackOff=function(){H&&(H=0,te(),$())},(0,s.l_)(e,"_setTimeoutOverride",(function(){return P.set}),(function(e){P=(0,b.zG)(e,P.clear)})),(0,s.l_)(e,"_clearTimeoutOverride",(function(){return P.clear}),(function(e){P=(0,b.zG)(P.set,e)}))})),i}return(0,i.ne)(n,e),n.__ieDyn=1,n}(v.i)}}]);